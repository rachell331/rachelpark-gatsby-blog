---
emoji:
title: Life Cycle
date: '2022-01-11 00:04:18'
author: Rachel
tags: Front Study
categories: Study
---

![Screen Shot 2022-01-10 at 8.36.36 PM.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5ebf77cb-f7f3-4e53-8503-e4fc2e351705/Screen_Shot_2022-01-10_at_8.36.36_PM.png)

### classí˜• ì»´í¬ë„ŒíŠ¸ì—ì„œì˜ lifecycle

```jsx
class Detail2 extends React.Component {
  componentDidMount() {
    //Detail2 ì»´í¬ë„ŒíŠ¸ê°€ Mount ë˜ì—ˆì„ ë•Œ ì‹¤í–‰í•  ì½”ë“œ (ë“±ì¥)
    //ex. Ajax ìš”ì²­, í˜ì´ì§€ ë Œë”ë§ ë˜ìë§ˆì ë°ì´í„° ë¶ˆëŸ¬ì™€ì¤˜~
  }
  componentWillUnmount() {
    //Detail2ì»´í¬ë„ŒíŠ¸ê°€ Unmountë˜ê¸° ì§ì „ì— ì‹¤í–‰í•  ì½”ë“œ (í‡´ì¥)
  }
}
```

### Life Cycle method

- ê°ê°ì˜ ì»´í¬ë„ŒíŠ¸ë“¤ì€ ê°ìì˜ ë¼ì´í”„ ì‚¬ì´í´ì„ ê°€ì§€ë©°, ì´ 3ê°€ì§€ ë‹¨ê³„ë¡œ ë‚˜ë‰œë‹¤.
  Mounting(ìƒì„±orë§ˆìš´íŠ¸), Updating(ì—…ë°ì´íŠ¸), and Unmounting(ì œê±°orì–¸ë§ˆìš´íŠ¸)
  ![](https://images.velog.io/images/bori9412/post/8d6583a6-b6ce-4e14-928a-d8321001845c/image.png)

#### 1. Mounting(ë§ˆìš´íŠ¸)

DOMì´ ìƒì„±ë˜ê³  ë‚˜ì„œ ì›¹ ë¸Œë¼ìš°ì € ìƒì— ìš”ì†Œë“¤ì„ ë‚˜ì—´í•˜ëŠ” ê³¼ì •
ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ í˜¸ì¶œë˜ëŠ” 4ê°€ì§€ì˜ ë¦¬ì•¡íŠ¸ ë‚´ì¥ ë©”ì„œë“œ

- `constructor` : **ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒˆë¡œ ë§Œë“¤ ë•Œë§ˆë‹¤ í˜¸ì¶œë˜ëŠ” í´ë˜ìŠ¤ ìƒì„±ì ë©”ì„œë“œ**,
  propsì™€ í•¨ê»˜ íŒŒë¼ë¯¸í„°ë¡œ í˜¸ì¶œë¨. super(props)ë¥¼ ë°˜ë“œì‹œ í˜¸ì¶œí•¨ìœ¼ë¡œì¨, ì»´í¬ë„ŒíŠ¸ê°€ ë¶€ëª¨ë¡œë¶€í„° ë©”ì„œë“œë¥¼ ìƒì†ë°›ì„ ìˆ˜ ìˆëŠ” ìƒíƒœê°€ ëœë‹¤.
- `getDerivedStateFromProps` : **propsì— ìˆëŠ” ê°’ì„ stateì— ë„£ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œ**
  stateë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ”ë‹¤. DOMì´ ë Œë”ë§ í•˜ê¸° ì§ì „ì— í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œì´ë‹¤.
- `render` : **UIë¥¼ ë Œë”ë§**
- `componentDidMount` : **ì»´í¬ë„ŒíŠ¸ê°€ ì›¹ ë¸Œë¼ìš°ì €ìƒì— ë‚˜íƒ€ë‚œ í›„ì— í˜¸ì¶œí•˜ëŠ” ë©”ì„œë“œ**
  ì´ë¯¸ DOM ìƒì— ìˆëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ì„ ë‹¤ë£° ë•Œ ì‚¬ìš©í•œë‹¤.

#### 2. Updating(ì—…ë°ì´íŠ¸)

ì»´í¬ë„ŒíŠ¸ê°€ ì—…ë°ì´íŠ¸ ë  ë•Œ ì‹¤í–‰ë˜ëŠ” ë©”ì„œë“œë“¤
ì—…ë°ì´íŠ¸ ë˜ëŠ” ê²½ìš° : propsê°€ ë°”ë€”ë•Œ, stateê°€ ë°”ë€”ë•Œ, ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ë  ë•Œ, this.forceUpdateë¡œ ê°•ì œë¡œ ë Œë”ë§ì„ íŠ¸ë¦¬ê±°í•  ë•Œ

- `getDerivedStateFromProps` : ë§ˆìš´íŠ¸ ê³¼ì •ì—ì„œë„ í˜¸ì¶œ. ì—…ë°ì´íŠ¸ê°€ ì‹œì‘í•˜ê¸° ì „ì—ë„ í˜¸ì¶œ. **propsì˜ ë³€í™”ì— ë”°ë¼ stateê°’ì— ë³€í™”ë¥¼ ì£¼ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©** -`shouldComponentUpdate` : ì»´í¬ë„ŒíŠ¸ê°€ **ë Œë”ë§ì„ í•  ê²ƒì¸ì§€ ê²°ì •í•˜ëŠ” ë©”ì„œë“œ(Boolean ê°’ ë°˜í™˜)**
  true : ë‹¤ìŒ ë¼ì´í”„ì‚¬ì´í´ ë©”ì„œë“œë¥¼ ì‹¤í–‰
  false: ì‘ì—… ì¤‘ì§€
  âœ” íŠ¹ì •í•¨ìˆ˜ì—ì„œ this.forceUpdate()ì‚¬ìš©ì‹œ ì´ ê³¼ì • ìƒëµ, render()í•¨ìˆ˜ ì¦‰ì‹œ í˜¸ì¶œ
- `render`: ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬ë Œë”ë§
- `getSanpshotBeforeUpdate` : ì»´í¬ë„ŒíŠ¸ **ë³€í™”ë¥¼ DOMì— ë°˜ì˜í•˜ê¸° ì§ì „ì— í˜¸ì¶œ**í•˜ëŠ” ë©”ì„œë“œ
  ì—…ë°ì´íŠ¸ ì „/í›„ì˜ state, propsì— ì ‘ê·¼ì´ ê°€ëŠ¥í•´ì„œ ë¹„êµí•´ ë³¼ ìˆ˜ ìˆë‹¤.
  ì´ ë©”ì„œë“œê°€ ìˆìœ¼ë©´ `componentDidUpdate()`ì™€ ë°˜ë“œì‹œ í•¨ê»˜ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
- `componentDidUpdate` : **ì»´í¬ë„ŒíŠ¸ì˜ ì—…ë°ì´íŠ¸ ì‘ì—…ì´ ëë‚œ í›„ í˜¸ì¶œí•˜ëŠ” ë©”ì„œë“œ**

#### 3. Unmounting(ì–¸ë§ˆìš´íŠ¸)

ì»´í¬ë„ŒíŠ¸ë¥¼ DOMì—ì„œ ì œê±°í•˜ëŠ” ê³¼ì •

- `componentWillUnmount` : **ì»´í¬ë„ŒíŠ¸ê°€ ì›¹ ë¸Œë¼ìš°ì € ìƒì—ì„œ ì‚¬ë¼ì§€ê¸° ì „ì— í˜¸ì¶œí•˜ëŠ” ë©”ì„œë“œ**

---

### ğŸ“Œ ê° ë©”ì„œë“œë“¤ ìì„¸íˆ ì‚´í´ë³´ê¸°

![](https://images.velog.io/images/bori9412/post/1b69b7df-10ff-45fd-ac76-cf9bf786e3a5/image.png)

> #### render( )
>
> í•„ìˆ˜ ë©”ì„œë“œë¡œ ì»´í¬ë„ŒíŠ¸ì˜ ìƒê¹€ìƒˆë¥¼ ê²°ì •í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.
> this.propsì™€ this.stateì•ˆì— ì ‘ê·¼í•  ìˆ˜ ìˆê³ , ë¦¬ì•¡íŠ¸ ìš”ì†Œë¥¼ ë°˜í™˜í•œë‹¤.
> âœ” ì´ë²¤íŠ¸ ì„¤ì •ì´ ì•„ë‹Œ ê³³ì—ì„œ setStateë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆë¨
> âœ” ë¸Œë¼ìš°ì €ì˜ DOMì— ì ‘ê·¼í•´ì„œë„ ì•ˆë¨
> â¡ DOMì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜ stateì— ë³€í™”ë¥¼ ì¤„ ë•Œ : componentDidMount ì²˜ë¦¬

> #### constructor ( )
>
> ì»´í¬ë„ŒíŠ¸ ìƒì„±ì ë©”ì„œë“œ
> ì´ˆê¸° state ì„¤ì •

> #### getDerivedStateFromProps( )
>
> propsë¡œ ë°›ì•„ì˜¨ ê°’ì„ stateë¡œ ì—…ë°ì´íŠ¸ ì‹œí‚¤ëŠ” ìš©ë„ (ver.16.3 ì´ìƒ ì ìš©)
> ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ ë  ë•Œ, ì—…ë°ì´íŠ¸ ë  ë•Œ í˜¸ì¶œ

> #### componentDidMount( )
>
> ì²« ë Œë”ë§ì„ ë§ˆì¹œ í›„ ì‹¤í–‰
> ë¹„ë™ê¸° ì‘ì—…ì„ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš©

> #### shouldComponentUpdate ( )
>
> props or state ë³€ê²½ ì‹œ ì¬ë Œë”ë§ ì—¬ë¶€ë¥¼ ë¬»ëŠ” ë©”ì„œë“œ
> defaultê°’ì€ trueì´ë©°, falseê°’ì„ ë°˜í™˜í•  ê²½ìš° ì—…ë°ì´íŠ¸ ì¤‘ì§€

- í˜„ì¬ props, state : `this.props`, `this.state`
- ìƒˆë¡œ ì„¤ì •ë  props, state: `nextProps`, `nextState`

> #### getSnapshotBeforeUpdate ( )
>
> renderì—ì„œ ë°˜ì˜ëœ ê²°ê³¼ë¬¼ì´ ë¸Œë¼ìš°ì €ì— ì‹¤ì œë¡œ ë°˜ì˜ë˜ê¸° ì§ì „ í˜¸ì¶œ
> ex. ì—…ë°ì´íŠ¸ í•˜ê¸° ì „ì˜ í˜„ì¬ ìŠ¤í¬ë¡¤ë°”ì˜ ìœ„ì¹˜ ìœ ì§€

```js
getSnapshotBeforeUpdate(prevProps, prevState) {
  if(prevState.array ! == this.state.array){
  const { scrollTop, scrollHeight } = this.lis
  return { scrollTop, scrollHeight };
  }
}
```

> #### componentDidUpdate ( prevProps, prevState, snapshot) { ... }
>
> ì—…ë°ì´íŠ¸ê°€ ëë‚œ ì§í›„ ì‹¤í–‰
> ì´ì „ì— ê°€ì¡Œë˜ ë°ì´í„°ì— ì ‘ê·¼ ê°€ëŠ¥(prevProps, prevState ì´ìš©)

> #### componentDidCatch ( error, info) { .. }
>
> ë Œë”ë§ ë„ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ, ì˜¤ë¥˜ UIë¥¼ ë³´ì—¬ì£¼ëŠ” ë©”ì„œë“œ

- error: ì–´ë–¤ ì—ëŸ¬ê°€ ë°œìƒí–ˆëŠ”ì§€ ì•Œë ¤ì¤€ë‹¤. (ë‹¨, this.props.childrenìœ¼ë¡œ ì „ë‹¬ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ë§Œ ì¡ì•„ì¤€ë‹¤.)
- info : ì–´ë””ì— ìˆëŠ” ì½”ë“œì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆëŠ”ì§€ ì•Œë ¤ì¤€ë‹¤.

### functioní˜• ì»´í¬ë„ŒíŠ¸ì—ì„œì˜ lifecycle : **useEffect()ì‚¬ìš©**

ğŸ‡Â ì»´í¬ë„ŒíŠ¸ê°€ **ìƒì„±, ì—…ë°ì´íŠ¸ ë  ë•Œ** íŠ¹ì • ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

```jsx
import { useEffect } from 'react';

function App() {
  useEffect(() => {
    {
      /*renderingì´ ë  ë•Œ ë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” ë¶€ë¶„*/
    }
  });
  return <div></div>;
}
```

ğŸ‡Â ì»´í¬ë„ŒíŠ¸ê°€ **ì‚¬ë¼ì§ˆ ë•Œ**(unmount ë  ë•Œ) â†’ `return` ë¬¸ìœ¼ë¡œ ë°˜í™˜í•´ì¤€ë‹¤

```jsx
import { useEffect } from 'react';

function App() {
  useEffect(() => {
    return function ì´ë¦„() {
      ì‹¤í–‰ì½”ë“œ;
    };
    or;
    return () => {
      ì‹¤í–‰ì½”ë“œ;
    };
  });
  return <div></div>;
}
```

ğŸ‡Â useEffect **ì—¬ëŸ¬ë²ˆ** ì‚¬ìš©í•  ë•Œ

```jsx
import React, { useState, useEffect } from 'react';

function App() {
  useEffect(() => {
    //ì²« ë²ˆì§¸ ì‹¤í–‰ë˜ëŠ” ì½”ë“œ
  });
  useEffect(() => {
    //ë‘ ë²ˆì§¸ë¡œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œ
  });

  return <div></div>;
}
```

ğŸ‡Â ìµœì´ˆ1íšŒë§Œ ì‹¤í–‰í•˜ê³ , ì—…ë°ì´íŠ¸ë•ŒëŠ” ì‹¤í–‰í•˜ì§€ ì•ŠìŒ

```jsx
useEffect(() => {
  ì‹¤í–‰ì½”ë“œ;
}, []);
```

ğŸ‡Â íŠ¹ì •stateê°’ì´ ë³€ê²½ë ë•Œë§Œ ì‹¤í–‰ë¨

```jsx
useEffect(() => {
  let íƒ€ì´ë¨¸ = setTimeout(() => {
    alertë³€ê²½(false);
  }, 2000);
}, [alert]);
```

> ğŸ’¡ **stateê°’ì— ë”°ë¼ì„œ UIê°€ ë³´ì—¬ì§€ê³ / ì•ˆë³´ì—¬ì§€ê²Œ ë§Œë“¤ì—ˆëŠ”ë° í•­ìƒ ì´ë ‡ê²Œ ë§Œë“­ë‹ˆê¹Œ?**
> â†’ **YES**, í•­ìƒ ë³´ì´ëŠ” UIê°€ ì•„ë‹ˆë¼ë©´ ì´ë ‡ê²Œ ë§Œë“ ë‹¤.

```jsx
const [hideAlarm, setHideAlarm] = useState(false);
...
useEffect(() => {
    let handleAlarm = setTimeout(() => {
      setHideAlarm(true);
    }, 2000);
  }, []);
....
{!hideAlarm ? (
        <div className="my-alert">
          <p>* ì¬ê³ ê°€ ì–¼ë§ˆ ë‚¨ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤</p>
        </div>
      )
 : null
}
```
